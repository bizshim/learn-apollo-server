generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model estimate_request {
  id                    String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  business_partner_code String                  @db.VarChar
  work_name             String                  @db.VarChar
  project_name          String                  @db.VarChar
  delivery_zip          String                  @db.VarChar
  delivery_address      String                  @db.VarChar
  request_at            DateTime                @db.Date
  src_department_code   String                  @db.VarChar
  src_employee_code     String                  @db.VarChar
  dst_factory_type_id   String                  @db.Uuid
  estimate_kind         Int
  delivery_at           DateTime?               @db.Date
  response_at           DateTime?               @db.Date
  estimate_status       Int
  create_at             DateTime                @default(now()) @db.Timestamp(6)
  update_at             DateTime?               @db.Timestamp(6)
  delete_at             DateTime?               @db.Timestamp(6)
  estimate_submission   estimate_submission[]
  tank_estimate_request tank_estimate_request[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model estimate_submission {
  id                         String                       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  estimate_request_id        String                       @db.Uuid
  business_partner_code      String                       @db.VarChar
  work_name                  String                       @db.VarChar
  project_name               String                       @db.VarChar
  estimate_at                DateTime                     @db.Date
  estimate_no                String?                      @db.VarChar
  payment_terms              String?                      @db.VarChar
  construction_period        String?                      @db.VarChar
  estimate_due_at            DateTime                     @db.Date
  interest_rate              Int
  gross_margin_rate          Float?
  purchase_price             Float?
  contact_employee_code      String                       @db.VarChar
  approve1_employee_code     String?                      @db.VarChar
  approve2_employee_code     String?                      @db.VarChar
  approver_comment           String?
  create_at                  DateTime                     @default(now()) @db.Timestamp(6)
  update_at                  DateTime?                    @db.Timestamp(6)
  delete_at                  DateTime?                    @db.Timestamp(6)
  estimate_request           estimate_request             @relation(fields: [estimate_request_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_estimate_submission_estimate_request_id")
  estimate_submission_detail estimate_submission_detail[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model estimate_submission_detail {
  id                       String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  estimate_submission_id   String                 @db.Uuid
  detail_type              Int?
  tank_estimate_request_id String?                @db.Uuid
  product_code             String?                @db.VarChar
  num                      Float
  cost_price               Float
  profit_margin            Float
  unit_price               Float
  amount                   Float
  remark                   String?
  create_at                DateTime               @default(now()) @db.Timestamp(6)
  update_at                DateTime?              @db.Timestamp(6)
  delete_at                DateTime?              @db.Timestamp(6)
  estimate_submission      estimate_submission    @relation(fields: [estimate_submission_id], references: [id], onDelete: Cascade, map: "fk_estimate_submission_detail_estimate_submission_id")
  tank_estimate_request    tank_estimate_request? @relation(fields: [tank_estimate_request_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_estimate_submission_detail_tank_estimate_request_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tank_estimate_request {
  id                            String                          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  estimate_request_id           String?                         @db.Uuid
  tank_standard_id              String?                         @db.Uuid
  capacity                      Int?
  diameter                      Int?
  tank_type_id                  String?                         @db.Uuid
  thickness                     Int?
  tank_material_type_id         String?                         @db.Uuid
  nozzle_material_type_id       String?                         @db.Uuid
  mirror_finish_type_id         String?                         @db.Uuid
  partition_room_num            Int?
  partition_board_type_id       String?                         @db.Uuid
  protector_type                String?                         @db.Uuid
  protector_height              Int?
  protector_material_type_id    String?                         @db.Uuid
  burial_method_type_id         String?                         @db.Uuid
  interior_cleaning_type_id     String?                         @db.Uuid
  process_photo_type_id         String?                         @db.Uuid
  participation_fee_type_id     String?                         @db.Uuid
  protector_check_position_x    Float?
  protector_check_position_y    Float?
  nozzle_check_position_x       Float?
  nozzle_check_position_y       Float?
  num                           Int?
  remarks                       String?
  tank_estimate_id              String?                         @db.Uuid
  tank_estimate_complete_at     DateTime?                       @db.Date
  tank_estimate_price           BigInt?
  create_at                     DateTime                        @default(now()) @db.Timestamp(6)
  update_at                     DateTime?                       @db.Timestamp(6)
  delete_at                     DateTime?                       @db.Timestamp(6)
  estimate_submission_detail    estimate_submission_detail[]
  estimate_request              estimate_request?               @relation(fields: [estimate_request_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_tank_estimate_request_estimate_request_id")
  tank_estimate_request_drawing tank_estimate_request_drawing[]
  tank_estimate_request_manhole tank_estimate_request_manhole[]
  tank_estimate_request_nozzle  tank_estimate_request_nozzle[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tank_estimate_request_drawing {
  id                            String                          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tank_estimate_request_id      String                          @db.Uuid
  no                            Int
  key                           String?                         @db.VarChar
  type                          Int?
  create_at                     DateTime                        @default(now()) @db.Timestamp(6)
  update_at                     DateTime?                       @db.Timestamp(6)
  delete_at                     DateTime?                       @db.Timestamp(6)
  tank_estimate_request         tank_estimate_request           @relation(fields: [tank_estimate_request_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_tank_estimate_request_drawing_tank_estimate_request_id")
  tank_estimate_request_manhole tank_estimate_request_manhole[]
  tank_estimate_request_nozzle  tank_estimate_request_nozzle[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tank_estimate_request_manhole {
  id                               String                         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tank_estimate_request_id         String                         @db.Uuid
  no                               Int
  diameter                         Int
  height                           Int
  tank_estimate_request_drawing_id String?                        @db.Uuid
  check_position_x                 Float?
  check_position_y                 Float?
  create_at                        DateTime                       @default(now()) @db.Timestamp(6)
  update_at                        DateTime?                      @db.Timestamp(6)
  delete_at                        DateTime?                      @db.Timestamp(6)
  tank_estimate_request            tank_estimate_request          @relation(fields: [tank_estimate_request_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_tank_estimate_request_manhole_tank_estimate_request_id")
  tank_estimate_request_drawing    tank_estimate_request_drawing? @relation(fields: [tank_estimate_request_drawing_id], references: [id], onDelete: Cascade, map: "fk_tank_estimate_request_manhole_tank_etd_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tank_estimate_request_nozzle {
  id                               String                         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tank_estimate_request_id         String                         @db.Uuid
  no                               Int
  name                             Int
  size                             Int
  num                              Int
  material_name_joint_type_id      String                         @db.Uuid
  material_id                      String                         @db.Uuid
  drop_status_type_id              String                         @db.Uuid
  tank_estimate_request_drawing_id String?                        @db.Uuid
  check_position_x                 Float?
  check_position_y                 Float?
  create_at                        DateTime                       @default(now()) @db.Timestamp(6)
  update_at                        DateTime?                      @db.Timestamp(6)
  delete_at                        DateTime?                      @db.Timestamp(6)
  tank_estimate_request_drawing    tank_estimate_request_drawing? @relation(fields: [tank_estimate_request_drawing_id], references: [id], onDelete: Cascade, map: "fk_tank_estimate_request_nozzle_tank_erd_id")
  tank_estimate_request            tank_estimate_request          @relation(fields: [tank_estimate_request_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_tank_estimate_request_nozzle_tank_estimate_request_id")
}
